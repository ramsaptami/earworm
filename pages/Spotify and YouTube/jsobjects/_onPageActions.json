{
  "unpublishedCollection": {
    "name": "_onPageActions",
    "pageId": "Spotify and YouTube",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tauthorizeSpotifyUsage: async function () {\n\t\ttry {\t\t\n\t\t\tconsole.log(\"Step 1: Starting to authorize your app. \\\\n Checking for valid/available auth codes\")\n\t\t\tconsole.log(appsmith.URL.queryParams.code ?? 'No auth code found in the URL' )\t\t\n\t\t\tappsmith.URL.queryParams.code ? SpotifySettings.requestCall() : SpotifySettings.refreshCall()\n\t\t\t\n\t\t\tawait this.runAllSpotifyAPIs()\t\n\t\t} catch(error) {\n\t\t\tconsole.log(\"You'll need to authorize from the start\")\n\t\t\tshowAlert(\"App can't be authorized unless done from the home page\")\n\t\t}\n\t},\n\n\trunAllSpotifyAPIs: () => {\n\t\tlet funcToRun = [\n\t\t\tfetchAlbumTracks.run(),\n\t\t\tfetchTopTracks.run(),\n\t\t\tfetchAlbums.run()\n\t\t]\n\t\treturn Promise.all(funcToRun)\n\t\t\t.then (async () => {\n\t\t\tshowAlert(\"You are now connected to Spotify ðŸŽ‰\")\n\t\t\tconsole.log(\"Step 6: All Spotify & YouTube API calls have been successfully executed\")\n\t\t\tyouTubeCustomSearch.run()\n\t\t\tawait console.log(\"Hope you're ready to listen to some music ðŸŽ‰\")\n\t\t})\n\t},\n\n\trace: () => {\n\t\treturn Promise.race([\n\t\t\tfetchAlbums.run(),\n\t\t\tfetchAlbumTracks.run(),\n\t\t\tfetchTopTracks.run(),\n\t\t\tsearchAnyArtist.run()\n\t\t]).then((result) => console.log(result.args))\n\t\t\t.catch((e) => showAlert('hello '+e.toString()))\n\t}\n}",
    "variables": []
  },
  "id": "Spotify and YouTube__onPageActions",
  "deleted": false,
  "gitSyncId": "61ea4a44361846772cfb117d_623acab6ee795b27770e7868"
}