{
  "unpublishedCollection": {
    "name": "SpotifyManager",
    "pageId": "Spotify and YouTube",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\t//artist: searchArtist.text ?? selectArtist.selectedOptionLabel,\n\n\tartistSearch: () => {\n\t\tspotifySearch.run(() => { \n\t\t\tstoreValue('artistId', spotifySearch.data.albums.items[0].artists[0].id)\n\t\t\tfetchAlbums.run()\n\t\t\t\t.then(() => { \n\t\t\t\tthis.fetchArtistTopTracks(spotifySearch.data.artists.items[0].id)}) }, \n\t\t() => showAlert('Unable to fetch artist ID','warning'))\n\t},\n\n\n\tfetchArtistAlbums: () => {\n\t\tconst albums = fetchAlbums.data.items.map((item) => ({\n\t\t\tlabel:item.name , value: item.id\n\t\t}))\n\t\treturn _.filter(albums)\n\t},\n\n\tfetchArtistTracks: () => {\n\t\tlet tracks = fetchAlbumTracks.data.items.map((item) => ({\n\t\t\tlabel: item.name, value:item.external_urls.spotify\n\t\t}))\n\t\treturn _.uniq(tracks)\n\t},\n\n\tfetchArtistTopTracks: (artist) => {\n\t\tstoreValue('artist', artist)\n\t\t\t.then(() => {\n\t\t\tconsole.log('stored artist code and now trying to run spotify API')\t\n\t\t\tfetchTopTracks.run(\n\t\t\t\t() => {\tyouTubeCustomSearch.run(); console.log('ran Spotify fetchTopTracks query') },\n\t\t\t\t() => { showAlert('Uh uh! :( Looks like auth token has expired','warning'), console.log('cannot process artist') })\n\t\t})\n\t\t\t.catch(() => console.log('failure'))\n\t}\n}",
    "variables": [],
    "userPermissions": []
  },
  "id": "Spotify and YouTube_SpotifyManager",
  "deleted": false,
  "gitSyncId": "61ea4a44361846772cfb117d_626b99c4c12c530f8f890432"
}