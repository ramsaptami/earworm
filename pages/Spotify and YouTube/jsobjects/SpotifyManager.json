{
  "unpublishedCollection": {
    "name": "SpotifyManager",
    "pageId": "Spotify and YouTube",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tartist: searchArtist.text ?? selectArtist.selectedOptionLabel,\n\n\tmainSearch: () => {\n\t\tsearchAnyArtist.run(async() => { \n\t\t\tawait fetchAlbums.run()\n\t\t\t\t.then(() => { \n\t\t\t\tthis.processArtist(searchAnyArtist.data.artists.items[0].id)}) }, \n\t\t\t\t\t\t\t\t\t\t\t\t() => showAlert('Unable to fetch artist ID','warning'))\n\t},\n\n\n\tfetchArtistAlbums: () => {\n\t\tconst albums = fetchAlbums.data.items.map((item) => ({\n\t\t\tlabel:item.name , value: item.id\n\t\t}))\n\t\treturn _.filter(albums)\n\t},\n\n\tfetchArtistTracks: () => {\n\t\tlet tracks = fetchAlbumTracks.data.items.map((item) => ({\n\t\t\tlabel: item.name, value:item.external_urls.spotify\n\t\t}))\n\t\treturn _.uniq(tracks)\n\t},\n\n\t//-----Custom search artists on Spotify-----//\n\trunCustomSearch: async () => {\n\t\tconst searchValue = searchArtist.text ?? selectArtist.selectedOptionLabel;\n\t\treturn searchValue\n\t},\n\n\tprocessArtist: (artistCode) => {\n\t\tstoreValue('artistCode', artistCode)\n\t\t\t.then(() => {\n\t\t\tconsole.log('stored artist code and now trying to run spotify API')\t\n\t\t\tfetchTopTracks.run()\n\t\t\t\t.then(() => {\tyouTubeCustomSearch.run(), console.log('ran Spotify fetchTopTracks query') }) \n\t\t\t\t.catch(() => { showAlert('Uh uh! :( Looks like auth token has expired','warning'), console.log('cannot process artist') })\n\t\t})\n\t\t\t.catch(() => console.log('failure'))\n\t}\n}",
    "variables": [
      {
        "name": "artist",
        "value": "searchArtist.text ?? selectArtist.selectedOptionLabel"
      }
    ],
    "userPermissions": []
  },
  "id": "Spotify and YouTube_SpotifyManager",
  "deleted": false,
  "gitSyncId": "61ea4a44361846772cfb117d_626b99c4c12c530f8f890432"
}